[{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create a new Sentinel Policy in Terraform Cloud","Label":"Create a Policy Set","Name":"CreatePolicySet","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The API call can be made to Intersight or an external endpoint added as Target. Target should be in claimed or connected state. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked. An empty value for this input indicates that the API call is made to Intersight.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"External Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=(TargetType eq TerraformCloud and Status eq Connected)","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The organization to create the policy set in. The organization must already exist in the system, and the token authenticating the API request must have permission to manage policies","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Organization","Name":"organization","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the policy set. an include letters, numbers, -, and _.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy Name","Name":"policyName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"VCS repository information. When present, the policies and configuration will be sourced from the specified VCS repository instead of being defined within Terraform Cloud.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VCS Repo","Name":"vcsRepo","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Whether or not this policies in this set should be checked on all of the organization's workspaces, or only on workspaces the policy set is attached to.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Make global policy","Name":"globalPolicy","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The branch of the VCS repo. If empty, the VCS provider's default branch value will be used.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VCS Branch","Name":"branch","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The OAuth Token ID to use to connect to the VCS host.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VCS OAuth Token","Name":"oAuthToken","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"A description of the set's purpose. This field supports Markdown and will be rendered in the Terraform Cloud UI.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Description","Name":"description","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The subdirectory of the attached VCS repository that contains the policies for this policy set. Files and directories outside of this sub-path will be ignored, and changes to those unrelated files won't cause the policy set to be updated. This option may only be specified when a VCS repo is present.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy Path","Name":"policyPath","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The ID of the newly created policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy ID","Name":"policyID","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The URL of the newly created Policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy URL Link","Name":"policyURL","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"RetryCount":3,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Tags":[{"Key":"category","Value":"Terraform Cloud"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Attach a Policy Set to a workspace in Terraform Cloud","Label":"Attach a Policy Set to workspaces","Name":"AttachaPolicySettoworkspaces","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The API call can be made to Intersight or an external endpoint added as Target. Target should be in claimed or connected state. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked. An empty value for this input indicates that the API call is made to Intersight.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"External Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=(TargetType eq TerraformCloud and Status eq Connected)","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The ID of the policy set to attach to workspaces","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy ID","Name":"policyID","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"A list of resource identifier (ID)  that defines the workspaces the policy set will be attached to.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Workspaces ID","Max":100,"Min":1,"Name":"workspacesID","ObjectType":"workflow.ArrayDataType","Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The ID of the newly created policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy ID","Name":"policyID","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The URL of the newly created Policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy URL Link","Name":"policyURL","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"RetryCount":3,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Tags":[{"Key":"category","Value":"Terraform Cloud"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"Description":"Create a new Policy Set in TFCB, then attach a list of workspaces","InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the Policy Set you want to create","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy Name","Name":"policyName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"A description of the set's purpose. This field supports Markdown and will be rendered in the Terraform Cloud UI.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Description","Name":"policyDescription","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Whether or not this policies in this set should be checked on all of the organization's workspaces, or only on workspaces the policy set is attached to.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Make policy global","Name":"makeGlobalPolicy","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the VCS repository hosting the policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VCS Repo ","Name":"vcsRepo","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"\tThe OAuth Token ID to use to connect to the VCS host.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VCS Oauth Token","Name":"vcsOAuthToken","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The branch of the VCS repo. If empty, the VCS provider's default branch value will be used.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VCS Branch","Name":"vcsBranch","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The subdirectory of the attached VCS repository that contains the policies for this policy set. Files and directories outside of this sub-path will be ignored, and changes to those unrelated files won't cause the policy set to be updated. This option may only be specified when a VCS repo is present.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy Path","Name":"policyPath","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Workspace ID","Max":100,"Min":1,"Name":"workspacesID","ObjectType":"workflow.ArrayDataType","Required":true}],"InputParameterSet":[],"Label":"Demo - Create a Policy Set and add a workspace","Name":"AddworkspacetoPolicySet","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Policy ID for the newly created policy set","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy ID","Name":"policyID","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The URL of the policy set","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Policy URL Link","Name":"policyURLLink","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"OutputParameters":{"policyID":"${CreatePolicySet1.output.policyID}","policyURLLink":"${CreatePolicySet1.output.policyURL}"},"Properties":{"EnableDebug":true,"ExternalMeta":true,"ObjectType":"workflow.WorkflowProperties","SupportStatus":"Supported"},"SharedScope":"user","Tags":[{"Key":"owner","Value":"sgioia"}],"Tasks":[{"Name":"StartTask","NextTask":"CreatePolicySet1","ObjectType":"workflow.StartTask"},{"CatalogMoid":"user","Description":"Create a new Sentinel Policy in Terraform Cloud","InputParameters":{"branch":"${workflow.input.vcsBranch}","description":"${workflow.input.policyDescription}","globalPolicy":"${workflow.input.makeGlobalPolicy}","oAuthToken":"${workflow.input.vcsOAuthToken}","organization":"rm-lab","policyName":"${workflow.input.policyName}","policyPath":"${workflow.input.policyPath}","vcsRepo":"${workflow.input.vcsRepo}"},"Label":"Create a Policy Set","Name":"CreatePolicySet1","ObjectType":"workflow.WorkerTask","OnSuccess":"AttachaPolicySettoworkspaces1","TaskDefinitionName":"CreatePolicySet","Version":1},{"CatalogMoid":"user","Description":"Attach a Policy Set to a workspace in Terraform Cloud","InputParameters":{"policyID":"${CreatePolicySet1.output.policyID}","workspacesID":"${workflow.input.workspacesID}"},"Label":"Attach a Policy Set to workspaces","Name":"AttachaPolicySettoworkspaces1","ObjectType":"workflow.WorkerTask","OnSuccess":"SuccessEndTask","TaskDefinitionName":"AttachaPolicySettoworkspaces","Version":1},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"}],"UiInputFilters":[],"UiRenderingData":{"Positions":[{"Name":"StartTask","X":263,"Y":35},{"Name":"SuccessEndTask","X":176.7005615234375,"Y":396.5014953613281},{"Name":"FailureEndTask","X":366.83056640625,"Y":442.1893005371094},{"Name":"CreatePolicySet1","X":179.82861328125,"Y":105.085693359375},{"Name":"AttachaPolicySettoworkspaces1","X":183.3997802734375,"Y":230.8292236328125}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\n  \"data\": {\n    \"type\": \"policy-sets\",\n    \"attributes\": {\n      \"name\": \"{{.global.task.input.policyName}}\",\n      \"description\": \"{{.global.task.input.description}}\",\n      \"global\": \"{{.global.task.input.globalPolicy}}\",\n      \"policies-path\": \"{{.global.task.input.policyPath}}\",\n      \"vcs-repo\": {\n        \"branch\": \"{{.global.task.input.branch}}\",\n        \"identifier\": \"{{.global.task.input.vcsRepo}}\",\n        \"ingress-submodules\": false,\n        \"oauth-token-id\": \"{{.global.task.input.oAuthToken}}\"\n      }\n    },\n    \"relationships\": {\n    }\n  }\n}","ContentType":"json","Description":"Create a new Policy Set in Terraform Cloud","EndpointRequestType":"Internal","Headers":{"Content-Type":["application/vnd.api+json"]},"Label":"Create new Policy Set","Method":"POST","Name":"InvokeGenericWebApi1","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 201}}","Message":"Successfully created a policy set","Name":"201","Type":"Success"},{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 404}}","Message":"Organization not found, or user unauthorized to perform action","Name":"404","Type":"TerminalError"},{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 422}}","Message":"Malformed request body (missing attributes, wrong types, etc.)","Name":"422","Type":"TerminalError"},{"Condition":"{{gt .global.InvokeGenericWebApi1.output.HttpStatusCode 300}}","Message":"Generic failure {{.global.InvokeGenericWebApi1.output.HttpStatusMsg}}","Name":"Generic Faliure","Type":"TerminalError"}],"ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"policyID","ObjectType":"content.Parameter","Path":"$.data.id","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"policyLink","ObjectType":"content.Parameter","Path":"$.data.links.self","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/v2/organizations/{{.global.task.input.organization}}/policy-sets"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Create a new Sentinel Policy in Terraform Cloud","Name":"Create a Policy Set","ObjectType":"workflow.BatchApiExecutor","Output":{"policyID":"{{.global.InvokeGenericWebApi1.output.policyID}}","policyURL":"{{.global.InvokeGenericWebApi1.output.policyLink}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"CreatePolicySet\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\n  \"data\": [\n    {{range $i, $e := .global.task.input.workspacesID}}\n      {{if $i}},\n      {{end}}{\"id\":\"{{$e}}\", \"type\":\"workspace\"}{{end}}\n  ]\n}  ","ContentType":"json","Description":"Attach a Policy Set to a workspace in Terraform Cloud","EndpointRequestType":"Internal","Headers":{"Content-Type":["application/vnd.api+json"]},"Label":"Attach a Policy Set to workspaces","Method":"POST","Name":"InvokeGenericWebApi1","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 204}}","Message":"Successfully attached the workspace(s) to a policy set","Name":"204","Type":"Success"},{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 404}}","Message":"Policy set not found or user unauthorized to perform action","Name":"404","Type":"TerminalError"},{"Condition":"{{eq .global.InvokeGenericWebApi1.output.HttpStatusCode 422}}","Message":"Malformed request body (missing attributes, wrong types, etc.)","Name":"422","Type":"TerminalError"},{"Condition":"{{gt .global.InvokeGenericWebApi1.output.HttpStatusCode 300}}","Message":"Generic failure {{.global.InvokeGenericWebApi1.output.HttpStatusMsg}}","Name":"Generic Faliure","Type":"TerminalError"}],"ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"policyID","ObjectType":"content.Parameter","Path":"$.data.id","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"policyLink","ObjectType":"content.Parameter","Path":"$.data.links.self","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Endpoint","Url":"api/v2/policy-sets/{{.global.task.input.policyID}}/relationships/workspaces"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Attach a Policy Set to a workspace in Terraform Cloud","Name":"Attach a Policy Set to workspaces","ObjectType":"workflow.BatchApiExecutor","Output":{"policyID":"{{.global.InvokeGenericWebApi1.output.policyID}}","policyURL":"{{.global.InvokeGenericWebApi1.output.policyLink}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"AttachaPolicySettoworkspaces\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]